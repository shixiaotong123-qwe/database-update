# 环境变量配置说明

## 基本配置

创建 `.env` 文件在项目根目录下：

```bash
# 数据库连接配置
DATABASE_URL=postgresql://sxt:default@localhost:5432/postgres

# 日志级别 (error, warn, info, debug, trace)
RUST_LOG=info

# 迁移失败处理策略
MIGRATION_FAILURE_STRATEGY=manual
```

## 完整配置选项

```bash
# 数据库连接配置
DATABASE_URL=postgresql://sxt:default@localhost:5432/postgres

# 日志级别
RUST_LOG=info

# 迁移失败处理策略: manual(默认), skip, rollback
MIGRATION_FAILURE_STRATEGY=manual

# 是否启用schema备份
ENABLE_SCHEMA_BACKUP=true

# 日志目录
LOG_DIR=/var/log/app

# 告警webhook（可选）
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/...

# 数据库连接池配置（可选）
# DB_MAX_CONNECTIONS=10
# DB_MIN_CONNECTIONS=5
# DB_CONNECTION_TIMEOUT=30
```

## 使用方法

1. 复制示例配置：
```bash
cp 环境变量配置说明.md .env
# 然后编辑 .env 文件
```

2. 或者直接设置环境变量：
```bash
export DATABASE_URL="postgresql://sxt:default@localhost:5432/postgres"
export RUST_LOG=info
```

## 数据库URL格式说明

PostgreSQL URL格式：
```
postgresql://用户名:密码@主机:端口/数据库名

示例:
postgresql://sxt:default@localhost:5432/postgres
postgresql://user:pass@db.example.com:5432/myapp
```

## 迁移策略说明

- `manual` (默认): 迁移失败时停止程序，需要手动处理
- `skip`: 跳过失败的迁移，继续执行（不推荐用于生产环境）
- `rollback`: 自动回滚到上一个成功的迁移状态

## Docker环境配置

如果使用Docker运行，可以在docker-compose.yml中设置：

```yaml
services:
  app:
    environment:
      - DATABASE_URL=postgresql://sxt:default@postgresql:5432/postgres
      - RUST_LOG=info
      - MIGRATION_FAILURE_STRATEGY=manual
```
